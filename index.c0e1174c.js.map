{"mappings":"AAAA,MAIMA,EAAaC,SAASC,eAAe,eACrCC,EAAUF,SAASG,cAAc,YACjCC,EAAcJ,SAASG,cAAc,cAE3C,IAAIE,EAAc,GACdC,EAAO,EACPC,EAAY,EAkBhBC,eAAeC,IACb,IACE,MAAMC,QAAiBC,MAAMC,IA7BhB,2BA6B8B,CACzCC,OAAQ,CACNC,IAhCQ,qCAiCRC,EAAGV,EACHW,WAAY,QACZC,YAAa,aACbC,YAAY,E,KACZZ,EACAa,SApCe,OAwCbC,KAAEA,EAAMC,UAAWC,GAAiBZ,EAASa,KAGnD,GAFAhB,EAAYe,EAEQ,IAAhBF,EAAKI,OAGP,OAFAC,EAAU,iFACVC,KAaN,SAAsBC,GACpB,MAAMC,EAAW5B,SAAS6B,yBAE1BF,EAAOG,SAAQC,IACb,MAAMC,aAAEA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,GAAcP,EAE3EQ,EAAOvC,SAASwC,cAAc,OACpCD,EAAKE,UAAUC,IAAI,cAEnB,MAAMC,EAAM3C,SAASwC,cAAc,OACnCG,EAAIC,IAAMZ,EACVW,EAAIE,IAAMX,EACVS,EAAIG,QAAU,OAEd,MAAMC,EAAO/C,SAASwC,cAAc,OACpCO,EAAKN,UAAUC,IAAI,QAEnB,MAAMM,EAAYC,EAAe,QAASd,GACpCe,EAAYD,EAAe,QAASb,GACpCe,EAAeF,EAAe,WAAYZ,GAC1Ce,EAAgBH,EAAe,YAAaX,GAElDS,EAAKM,OAAOL,EAAWE,EAAWC,EAAcC,GAChDb,EAAKc,OAAOV,EAAKI,GACjBnB,EAAS0B,YAAYf,EAAK,IAG5BrC,EAAQoD,YAAY1B,E,CApClB2B,CAAanC,GAjDM,GAoGjBd,EAAwBC,EAC1BH,EAAYqC,UAAUe,OAAO,SAE7BpD,EAAYqC,UAAUC,IAAI,QAC1BjB,EAAU,8DACVgC,SAASC,OAAOC,QAAQ,8D,CAtDxB,MAAOC,GACPC,QAAQC,IAAIF,GACZnC,EAAU,iDACVgC,SAASC,OAAOC,QAAQ,gD,EAkC5B,SAASV,EAAec,EAAOC,GAC7B,MAAMC,EAAIjE,SAASwC,cAAc,KAGjC,OAFAyB,EAAExB,UAAUC,IAAI,aAChBuB,EAAEC,UAAY,MAAMH,UAAcC,IAC3BC,C,CAGT,SAASvC,IACPxB,EAAQgE,UAAY,E,CAkBtB,SAASzC,EAAU0C,GACjB,MAAMC,EAAepE,SAASG,cAAc,UAC5CiE,EAAaC,YAAcF,EAC3BC,EAAaE,MAAMC,QAAU,QAC7Bd,SAASC,OAAOC,QAAQQ,E,CA5G1B/D,EAAYqC,UAAUC,IAAI,QAE1B3C,EAAWyE,iBAAiB,UAG5BhE,eAA4BiE,GAG1B,GAFAA,EAAMC,iBACNrE,EAAcoE,EAAME,OAAOC,SAASC,YAAYb,MAAMc,OAClC,KAAhBzE,EAAoB,OAExBC,EAAO,EACPC,EAAY,EACZmB,UACMjB,G,IAVRL,EAAYoE,iBAAiB,SAgG7BhE,iBACEF,UACMG,G","sources":["src/index.js"],"sourcesContent":["const API_KEY = '38138051-81d00d61410ef793a2f891f68';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst ITEMS_PER_PAGE = 20;\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nloadMoreBtn.classList.add('hide');\n\nsearchForm.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  searchQuery = event.target.elements.searchQuery.value.trim();\n  if (searchQuery === '') return;\n\n  page = 1;\n  totalHits = 0;\n  clearGallery();\n  await fetchImages();\n}\n\nasync function fetchImages() {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: ITEMS_PER_PAGE\n      }\n    });\n\n    const { hits, totalHits: newTotalHits } = response.data;\n    totalHits = newTotalHits;\n\n    if (hits.length === 0) {\n      showError('Sorry, there are no images matching your search query. Please try again.');\n      clearGallery();\n      return;\n    }\n\n    appendImages(hits);\n    checkLoadMoreButton();\n  } catch (error) {\n    console.log(error);\n    showError('Something went wrong. Please try again later.');\n    notiflix.Notify.failure('Something went wrong. Please try again later.');\n  }\n}\n\nfunction appendImages(images) {\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(image => {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n\n    const card = document.createElement('div');\n    card.classList.add('photo-card');\n\n    const img = document.createElement('img');\n    img.src = webformatURL;\n    img.alt = tags;\n    img.loading = 'lazy';\n\n    const info = document.createElement('div');\n    info.classList.add('info');\n\n    const likesElem = createInfoItem('Likes', likes);\n    const viewsElem = createInfoItem('Views', views);\n    const commentsElem = createInfoItem('Comments', comments);\n    const downloadsElem = createInfoItem('Downloads', downloads);\n\n    info.append(likesElem, viewsElem, commentsElem, downloadsElem);\n    card.append(img, info);\n    fragment.appendChild(card);\n  });\n\n  gallery.appendChild(fragment);\n}\n\nfunction createInfoItem(label, value) {\n  const p = document.createElement('p');\n  p.classList.add('info-item');\n  p.innerHTML = `<b>${label}:</b> ${value}`;\n  return p;\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction checkLoadMoreButton() {\n  if (page * ITEMS_PER_PAGE < totalHits) {\n    loadMoreBtn.classList.remove('hide');\n  } else {\n    loadMoreBtn.classList.add('hide');\n    showError(\"We're sorry, but you've reached the end of search results.\");\n    notiflix.Notify.failure(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n\nasync function loadMoreImages() {\n  page++;\n  await fetchImages();\n}\n\nfunction showError(message) {\n  const errorElement = document.querySelector('.error');\n  errorElement.textContent = message;\n  errorElement.style.display = 'block';\n  notiflix.Notify.failure(message);\n}\n\n// notiflix.Notify.init({ position: 'center-bottom', distance: '15px', timeout: 3000 });"],"names":["$1f0dc3b9307be026$var$searchForm","document","getElementById","$1f0dc3b9307be026$var$gallery","querySelector","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$searchQuery","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$totalHits","async","$1f0dc3b9307be026$var$fetchImages","response","axios","get","params","key","q","image_type","orientation","safesearch","per_page","hits","totalHits","newTotalHits","data","length","$1f0dc3b9307be026$var$showError","$1f0dc3b9307be026$var$clearGallery","images","fragment","createDocumentFragment","forEach","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","card","createElement","classList","add","img","src","alt","loading","info","likesElem","$1f0dc3b9307be026$var$createInfoItem","viewsElem","commentsElem","downloadsElem","append","appendChild","$1f0dc3b9307be026$var$appendImages","remove","notiflix","Notify","failure","error","console","log","label","value","p","innerHTML","message","errorElement","textContent","style","display","addEventListener","event","preventDefault","target","elements","searchQuery","trim"],"version":3,"file":"index.c0e1174c.js.map"}