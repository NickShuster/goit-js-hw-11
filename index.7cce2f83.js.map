{"mappings":"AAAA,MAIMA,EAAaC,SAASC,eAAe,eACrCC,EAAUF,SAASG,cAAc,YACjCC,EAAcJ,SAASG,cAAc,cACrCE,EAAeL,SAASG,cAAc,UAE5C,IAAIG,EAAc,GACdC,EAAO,EACPC,EAAY,EAoBhBC,eAAeC,IACb,IACE,MAAMC,QAAiBC,MAAMC,IAhChB,2BAgC8B,CACzCC,OAAQ,CACNC,IAnCQ,qCAoCRC,EAAGV,EACHW,WAAY,QACZC,YAAa,aACbC,YAAY,E,KACZZ,EACAa,SAvCe,OA2CbC,KAAEA,EAAMC,UAAWC,GAAiBZ,EAASa,KAQnD,GAPAhB,EAAYe,EAEC,IAAThB,GAAcc,EAAKI,OAAS,IA0FRC,EAzFH,oBAAoBlB,YA0F3CH,EAAasB,YAAcD,EAC3BrB,EAAauB,MAAMC,QAAU,QAC7BC,SAASC,OAAOC,QAAQN,GA3FpBO,KAGkB,IAAhBZ,EAAKI,QAAyB,IAATlB,EAGvB,OAFA2B,EAAU,iFACVC,KAaN,SAAsBC,GACpB,MAAMC,EAAWrC,SAASsC,yBAE1BF,EAAOG,SAAQC,IACb,MAAMC,aAAEA,EAAYC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,GAAcN,EAE5DO,EAAO/C,SAASgD,cAAc,OACpCD,EAAKE,UAAUC,IAAI,cAEnB,MAAMC,EAAMnD,SAASgD,cAAc,OACnCG,EAAIC,IAAMX,EACVU,EAAIE,IAAMX,EACVS,EAAIG,QAAU,OAEd,MAAMC,EAAOvD,SAASgD,cAAc,OACpCO,EAAKN,UAAUC,IAAI,QAEnB,MAAMM,EAAYC,EAAe,QAASd,GACpCe,EAAYD,EAAe,QAASb,GACpCe,EAAeF,EAAe,WAAYZ,GAC1Ce,EAAgBH,EAAe,YAAaX,GAElDS,EAAKM,OAAOL,EAAWE,EAAWC,EAAcC,GAChDb,EAAKc,OAAOV,EAAKI,GACjBlB,EAASyB,YAAYf,EAAK,IAG5B7C,EAAQ4D,YAAYzB,E,CApClB0B,CAAa1C,GAzDM,GA4GjBd,EAAwBC,EAC1ByB,KAEA+B,IACA9B,EAAU,8DACVJ,SAASC,OAAOkC,QAAQ,8D,CAtDxB,MAAOC,GACPC,QAAQC,IAAIF,GACZhC,EAAU,iDACVmC,SAAStC,OAAOkC,QAAQ,gD,CA0E5B,IAA4BvC,C,CAxC5B,SAAS+B,EAAea,EAAOC,GAC7B,MAAMC,EAAIxE,SAASgD,cAAc,KAGjC,OAFAwB,EAAEvB,UAAUC,IAAI,aAChBsB,EAAEC,UAAY,MAAMH,UAAcC,IAC3BC,C,CAGT,SAASrC,IACPjC,EAAQuE,UAAY,E,CAatB,SAASxC,IACP7B,EAAY6C,UAAUyB,OAAO,O,CAG/B,SAASV,IACP5D,EAAY6C,UAAUC,IAAI,O,CAQ5B,SAAShB,EAAUR,GACjBrB,EAAasB,YAAcD,EAC3BrB,EAAauB,MAAMC,QAAU,OAC7BC,SAASC,OAAOkC,QAAQvC,E,CA1H1BtB,EAAY6C,UAAUC,IAAI,QAC1B7C,EAAauB,MAAMC,QAAU,OAE7B9B,EAAW4E,iBAAiB,UAG5BlE,eAA4BmE,GAG1B,GAFAA,EAAMC,iBACNvE,EAAcsE,EAAME,OAAOC,SAASC,YAAYT,MAAMU,OAClC,KAAhB3E,EAAoB,OAExBC,EAAO,EACPC,EAAY,EACZ2B,IACA6B,UACMtD,G,IAXRN,EAAYuE,iBAAiB,SA8G7BlE,iBACEF,UACMG,G","sources":["src/index.js"],"sourcesContent":["const API_KEY = '38138051-81d00d61410ef793a2f891f68';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst ITEMS_PER_PAGE = 20;\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst errorElement = document.querySelector('.error');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nloadMoreBtn.classList.add('hide');\nerrorElement.style.display = 'none';\n\nsearchForm.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  searchQuery = event.target.elements.searchQuery.value.trim();\n  if (searchQuery === '') return;\n\n  page = 1;\n  totalHits = 0;\n  clearGallery();\n  hideLoadMoreButton();\n  await fetchImages();\n}\n\nasync function fetchImages() {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: ITEMS_PER_PAGE\n      }\n    });\n\n    const { hits, totalHits: newTotalHits } = response.data;\n    totalHits = newTotalHits;\n\n    if (page === 1 && hits.length > 0) {\n      showSuccessMessage(`Hooray! We found ${totalHits} images.`);\n      showLoadMoreButton();\n    }\n\n    if (hits.length === 0 && page === 1) {\n      showError('Sorry, there are no images matching your search query. Please try again.');\n      clearGallery();\n      return;\n    }\n\n    appendImages(hits);\n    checkLoadMoreButton();\n  } catch (error) {\n    console.log(error);\n    showError('Something went wrong. Please try again later.');\n    notiflix.Notify.failure('Something went wrong. Please try again later.');\n  }\n}\n\nfunction appendImages(images) {\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(image => {\n    const { webformatURL, tags, likes, views, comments, downloads } = image;\n\n    const card = document.createElement('div');\n    card.classList.add('photo-card');\n\n    const img = document.createElement('img');\n    img.src = webformatURL;\n    img.alt = tags;\n    img.loading = 'lazy';\n\n    const info = document.createElement('div');\n    info.classList.add('info');\n\n    const likesElem = createInfoItem('Likes', likes);\n    const viewsElem = createInfoItem('Views', views);\n    const commentsElem = createInfoItem('Comments', comments);\n    const downloadsElem = createInfoItem('Downloads', downloads);\n\n    info.append(likesElem, viewsElem, commentsElem, downloadsElem);\n    card.append(img, info);\n    fragment.appendChild(card);\n  });\n\n  gallery.appendChild(fragment);\n}\n\nfunction createInfoItem(label, value) {\n  const p = document.createElement('p');\n  p.classList.add('info-item');\n  p.innerHTML = `<b>${label}:</b> ${value}`;\n  return p;\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction checkLoadMoreButton() {\n  if (page * ITEMS_PER_PAGE < totalHits) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n    showError(\"We're sorry, but you've reached the end of search results.\");\n    Notiflix.Notify.failure(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hide');\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hide');\n}\n\nasync function loadMoreImages() {\n  page++;\n  await fetchImages();\n}\n\nfunction showError(message) {\n  errorElement.textContent = message;\n  errorElement.style.display = 'none';\n  Notiflix.Notify.failure(message);\n}\n\nfunction showSuccessMessage(message) {\n  errorElement.textContent = message;\n  errorElement.style.display = 'block';\n  Notiflix.Notify.success(message);\n}"],"names":["$1f0dc3b9307be026$var$searchForm","document","getElementById","$1f0dc3b9307be026$var$gallery","querySelector","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$errorElement","$1f0dc3b9307be026$var$searchQuery","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$totalHits","async","$1f0dc3b9307be026$var$fetchImages","response","axios","get","params","key","q","image_type","orientation","safesearch","per_page","hits","totalHits","newTotalHits","data","length","message","textContent","style","display","Notiflix","Notify","success","$1f0dc3b9307be026$var$showLoadMoreButton","$1f0dc3b9307be026$var$showError","$1f0dc3b9307be026$var$clearGallery","images","fragment","createDocumentFragment","forEach","image","webformatURL","tags","likes","views","comments","downloads","card","createElement","classList","add","img","src","alt","loading","info","likesElem","$1f0dc3b9307be026$var$createInfoItem","viewsElem","commentsElem","downloadsElem","append","appendChild","$1f0dc3b9307be026$var$appendImages","$1f0dc3b9307be026$var$hideLoadMoreButton","failure","error","console","log","notiflix","label","value","p","innerHTML","remove","addEventListener","event","preventDefault","target","elements","searchQuery","trim"],"version":3,"file":"index.7cce2f83.js.map"}